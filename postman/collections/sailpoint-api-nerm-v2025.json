{
  "item": [
    {
      "name": "delegations",
      "description": "",
      "item": [
        {
          "id": "28653328-93e6-4470-879b-ef24fe7944f4",
          "name": "List delegations",
          "request": {
            "name": "List delegations",
            "description": {
              "content": "Returns a list of delegation records, optionally filtered by delegate, delegator, or expiration status.",
              "type": "text/plain"
            },
            "url": {
              "path": [
                "delegations"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [
                {
                  "disabled": true,
                  "description": {
                    "content": "Filter by delegate ID",
                    "type": "text/plain"
                  },
                  "key": "delegate_id",
                  "value": "ac4aae0b-4140-49a4-a84c-126762fd0c8f"
                },
                {
                  "disabled": true,
                  "description": {
                    "content": "Filter by delegator ID",
                    "type": "text/plain"
                  },
                  "key": "delegator_id",
                  "value": "ac4aae0b-4140-49a4-a84c-126762fd0c8f"
                },
                {
                  "disabled": true,
                  "description": {
                    "content": "Filter by expiration status (true for expired, false for not expired)",
                    "type": "text/plain"
                  },
                  "key": "expired",
                  "value": "true"
                },
                {
                  "disabled": true,
                  "description": {
                    "content": "The maximum number of items to return.",
                    "type": "text/plain"
                  },
                  "key": "limit",
                  "value": "5"
                },
                {
                  "disabled": true,
                  "description": {
                    "content": "The number of items to skip before starting to collect the result set.",
                    "type": "text/plain"
                  },
                  "key": "offset",
                  "value": "5"
                },
                {
                  "disabled": true,
                  "description": {
                    "content": "Include related resources body. For example, 'include=delegator,delegate'.",
                    "type": "text/plain"
                  },
                  "key": "include",
                  "value": "delegator,delegate"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "GET",
            "body": {}
          },
          "response": [
            {
              "id": "039518e9-b4a3-4945-9df6-add986c180f8",
              "name": "Expected response to a valid request",
              "originalRequest": {
                "url": {
                  "path": [
                    "delegations"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [
                    {
                      "disabled": true,
                      "description": {
                        "content": "Filter by delegate ID",
                        "type": "text/plain"
                      },
                      "key": "delegate_id",
                      "value": "ac4aae0b-4140-49a4-a84c-126762fd0c8f"
                    },
                    {
                      "disabled": true,
                      "description": {
                        "content": "Filter by delegator ID",
                        "type": "text/plain"
                      },
                      "key": "delegator_id",
                      "value": "ac4aae0b-4140-49a4-a84c-126762fd0c8f"
                    },
                    {
                      "disabled": true,
                      "description": {
                        "content": "Filter by expiration status (true for expired, false for not expired)",
                        "type": "text/plain"
                      },
                      "key": "expired",
                      "value": "true"
                    },
                    {
                      "disabled": true,
                      "description": {
                        "content": "The maximum number of items to return.",
                        "type": "text/plain"
                      },
                      "key": "limit",
                      "value": "5"
                    },
                    {
                      "disabled": true,
                      "description": {
                        "content": "The number of items to skip before starting to collect the result set.",
                        "type": "text/plain"
                      },
                      "key": "offset",
                      "value": "5"
                    },
                    {
                      "disabled": true,
                      "description": {
                        "content": "Include related resources body. For example, 'include=delegator,delegate'.",
                        "type": "text/plain"
                      },
                      "key": "include",
                      "value": "delegator,delegate"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "method": "GET",
                "body": {}
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"delegations\": [\n    {\n      \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n      \"delegator_id\": \"12345678-1234-5678-1234-123456789012\",\n      \"delegate_id\": \"87654321-4321-6789-4321-210987654321\",\n      \"delegator\": {\n        \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"uid\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"type\": \"NeprofileUser\",\n        \"name\": \"Jane Doe\",\n        \"email\": \"jane@example.com\",\n        \"status\": \"active\",\n        \"login\": \"jane.doe\",\n        \"last_login\": \"2024-06-01T12:34:56Z\",\n        \"created_at\": \"2022-12-27 08:26:49.219717\",\n        \"updated_at\": \"2022-12-27 08:26:49.219717\"\n      },\n      \"delegate\": {\n        \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"uid\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"type\": \"NeprofileUser\",\n        \"name\": \"Jane Doe\",\n        \"email\": \"jane@example.com\",\n        \"status\": \"active\",\n        \"login\": \"jane.doe\",\n        \"last_login\": \"2024-06-01T12:34:56Z\",\n        \"created_at\": \"2022-12-27 08:26:49.219717\",\n        \"updated_at\": \"2022-12-27 08:26:49.219717\"\n      },\n      \"expiration\": \"2023-10-01T12:00:00Z\",\n      \"expired\": false,\n      \"created_at\": \"2022-12-27 08:26:49.219717\",\n      \"updated_at\": \"2022-12-27 08:26:49.219717\"\n    },\n    {\n      \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n      \"delegator_id\": \"12345678-1234-5678-1234-123456789012\",\n      \"delegate_id\": \"87654321-4321-6789-4321-210987654321\",\n      \"delegator\": {\n        \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"uid\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"type\": \"NeprofileUser\",\n        \"name\": \"Jane Doe\",\n        \"email\": \"jane@example.com\",\n        \"status\": \"active\",\n        \"login\": \"jane.doe\",\n        \"last_login\": \"2024-06-01T12:34:56Z\",\n        \"created_at\": \"2022-12-27 08:26:49.219717\",\n        \"updated_at\": \"2022-12-27 08:26:49.219717\"\n      },\n      \"delegate\": {\n        \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"uid\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n        \"type\": \"NeprofileUser\",\n        \"name\": \"Jane Doe\",\n        \"email\": \"jane@example.com\",\n        \"status\": \"active\",\n        \"login\": \"jane.doe\",\n        \"last_login\": \"2024-06-01T12:34:56Z\",\n        \"created_at\": \"2022-12-27 08:26:49.219717\",\n        \"updated_at\": \"2022-12-27 08:26:49.219717\"\n      },\n      \"expiration\": \"2023-10-01T12:00:00Z\",\n      \"expired\": false,\n      \"created_at\": \"2022-12-27 08:26:49.219717\",\n      \"updated_at\": \"2022-12-27 08:26:49.219717\"\n    }\n  ]\n}",
              "cookie": [],
              "_postman_previewlanguage": "json"
            }
          ],
          "event": [],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          }
        },
        {
          "id": "3ad1dd6a-2a1d-4060-b45d-a87c8ec447bf",
          "name": "Create a delegation",
          "request": {
            "name": "Create a delegation",
            "description": {
              "content": "Create a new delegation record.",
              "type": "text/plain"
            },
            "url": {
              "path": [
                "delegations"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"delegation\": {\n    \"delegator_id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegate_id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"expiration\": \"2023-10-01T12:00:00Z\"\n  }\n}",
              "options": {
                "raw": {
                  "headerFamily": "json",
                  "language": "json"
                }
              }
            }
          },
          "response": [
            {
              "id": "ba471c55-fd7a-4dc5-9eeb-6a41dc075e3a",
              "name": "Expected response to a valid request",
              "originalRequest": {
                "url": {
                  "path": [
                    "delegations"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"delegation\": {\n    \"delegator_id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegate_id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"expiration\": \"2023-10-01T12:00:00Z\"\n  }\n}",
                  "options": {
                    "raw": {
                      "headerFamily": "json",
                      "language": "json"
                    }
                  }
                }
              },
              "status": "Created",
              "code": 201,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"delegation\": {\n    \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegator_id\": \"12345678-1234-5678-1234-123456789012\",\n    \"delegate_id\": \"87654321-4321-6789-4321-210987654321\",\n    \"expiration\": \"2023-10-01T12:00:00Z\",\n    \"expired\": false,\n    \"created_at\": \"2022-12-27 08:26:49.219717\",\n    \"updated_at\": \"2022-12-27 08:26:49.219717\"\n  }\n}",
              "cookie": [],
              "_postman_previewlanguage": "json"
            }
          ],
          "event": [],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          }
        },
        {
          "id": "d47c8a33-2adc-4c95-8633-af9e38821e1c",
          "name": "Get a single delegation",
          "request": {
            "name": "Get a single delegation",
            "description": {
              "content": "Returns a single delegation record by its ID.",
              "type": "text/plain"
            },
            "url": {
              "path": [
                "delegations",
                ":id"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": [
                {
                  "type": "any",
                  "value": "1246d8b3-ac29-4015-8154-dea4434a73fa",
                  "key": "id",
                  "disabled": true,
                  "description": {
                    "content": "(Required) ID of the object to retrieve, update, or delete",
                    "type": "text/plain"
                  }
                }
              ]
            },
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "GET",
            "body": {}
          },
          "response": [
            {
              "id": "8929312a-1601-4cfd-8e85-8012805d3c2d",
              "name": "Expected response to a valid request",
              "originalRequest": {
                "url": {
                  "path": [
                    "delegations",
                    ":id"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": [
                    {
                      "disabled": true,
                      "description": {
                        "content": "(Required) ID of the object to retrieve, update, or delete",
                        "type": "text/plain"
                      },
                      "type": "any",
                      "value": "1246d8b3-ac29-4015-8154-dea4434a73fa",
                      "key": "id"
                    }
                  ]
                },
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "method": "GET",
                "body": {}
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"delegation\": {\n    \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegator_id\": \"12345678-1234-5678-1234-123456789012\",\n    \"delegate_id\": \"87654321-4321-6789-4321-210987654321\",\n    \"delegator\": {\n      \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n      \"uid\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n      \"type\": \"NeprofileUser\",\n      \"name\": \"Jane Doe\",\n      \"email\": \"jane@example.com\",\n      \"status\": \"active\",\n      \"login\": \"jane.doe\",\n      \"last_login\": \"2024-06-01T12:34:56Z\",\n      \"created_at\": \"2022-12-27 08:26:49.219717\",\n      \"updated_at\": \"2022-12-27 08:26:49.219717\"\n    },\n    \"delegate\": {\n      \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n      \"uid\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n      \"type\": \"NeprofileUser\",\n      \"name\": \"Jane Doe\",\n      \"email\": \"jane@example.com\",\n      \"status\": \"active\",\n      \"login\": \"jane.doe\",\n      \"last_login\": \"2024-06-01T12:34:56Z\",\n      \"created_at\": \"2022-12-27 08:26:49.219717\",\n      \"updated_at\": \"2022-12-27 08:26:49.219717\"\n    },\n    \"expiration\": \"2023-10-01T12:00:00Z\",\n    \"expired\": false,\n    \"created_at\": \"2022-12-27 08:26:49.219717\",\n    \"updated_at\": \"2022-12-27 08:26:49.219717\"\n  }\n}",
              "cookie": [],
              "_postman_previewlanguage": "json"
            }
          ],
          "event": [],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          }
        },
        {
          "id": "cc7f121b-c726-4fba-a972-e68d7419b179",
          "name": "Update a delegation",
          "request": {
            "name": "Update a delegation",
            "description": {
              "content": "Update an existing delegation record.",
              "type": "text/plain"
            },
            "url": {
              "path": [
                "delegations",
                ":id"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": [
                {
                  "type": "any",
                  "value": "1246d8b3-ac29-4015-8154-dea4434a73fa",
                  "key": "id",
                  "disabled": true,
                  "description": {
                    "content": "(Required) ID of the object to retrieve, update, or delete",
                    "type": "text/plain"
                  }
                }
              ]
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "PATCH",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"delegation\": {\n    \"delegator_id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegatee_id\": \"12345678-1234-5678-1234-567812345678\",\n    \"expiration_date\": \"2023-12-31T23:59:59Z\"\n  }\n}",
              "options": {
                "raw": {
                  "headerFamily": "json",
                  "language": "json"
                }
              }
            }
          },
          "response": [
            {
              "id": "3e20af91-7140-4e8c-beb2-4166ad6bef7a",
              "name": "Expected response to a valid request",
              "originalRequest": {
                "url": {
                  "path": [
                    "delegations",
                    ":id"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": [
                    {
                      "disabled": true,
                      "description": {
                        "content": "(Required) ID of the object to retrieve, update, or delete",
                        "type": "text/plain"
                      },
                      "type": "any",
                      "value": "1246d8b3-ac29-4015-8154-dea4434a73fa",
                      "key": "id"
                    }
                  ]
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "method": "PATCH",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"delegation\": {\n    \"delegator_id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegatee_id\": \"12345678-1234-5678-1234-567812345678\",\n    \"expiration_date\": \"2023-12-31T23:59:59Z\"\n  }\n}",
                  "options": {
                    "raw": {
                      "headerFamily": "json",
                      "language": "json"
                    }
                  }
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"delegation\": {\n    \"id\": \"ac4aae0b-4140-49a4-a84c-126762fd0c8f\",\n    \"delegator_id\": \"12345678-1234-5678-1234-123456789012\",\n    \"delegate_id\": \"87654321-4321-6789-4321-210987654321\",\n    \"expiration\": \"2023-10-01T12:00:00Z\",\n    \"expired\": false,\n    \"created_at\": \"2022-12-27 08:26:49.219717\",\n    \"updated_at\": \"2022-12-27 08:26:49.219717\"\n  }\n}",
              "cookie": [],
              "_postman_previewlanguage": "json"
            }
          ],
          "event": [],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          }
        },
        {
          "id": "f5c72be1-b272-4471-86d5-c126aafb1e05",
          "name": "Delete a delegation",
          "request": {
            "name": "Delete a delegation",
            "description": {
              "content": "Delete an existing delegation record.",
              "type": "text/plain"
            },
            "url": {
              "path": [
                "delegations",
                ":id"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": [
                {
                  "type": "any",
                  "value": "1246d8b3-ac29-4015-8154-dea4434a73fa",
                  "key": "id",
                  "disabled": true,
                  "description": {
                    "content": "(Required) ID of the object to retrieve, update, or delete",
                    "type": "text/plain"
                  }
                }
              ]
            },
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "DELETE",
            "body": {}
          },
          "response": [
            {
              "id": "03ba3d08-db12-4de2-a23e-5b832fa9b4e1",
              "name": "The delegation record '<delegation_id>' has been destroyed.",
              "originalRequest": {
                "url": {
                  "path": [
                    "delegations",
                    ":id"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": [
                    {
                      "disabled": true,
                      "description": {
                        "content": "(Required) ID of the object to retrieve, update, or delete",
                        "type": "text/plain"
                      },
                      "type": "any",
                      "value": "1246d8b3-ac29-4015-8154-dea4434a73fa",
                      "key": "id"
                    }
                  ]
                },
                "method": "DELETE",
                "body": {}
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "cookie": [],
              "_postman_previewlanguage": "text"
            }
          ],
          "event": [],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "const domain = pm.environment.get('domain') ? pm.environment.get('domain') : pm.collectionVariables.get('domain')",
          "const tokenUrl = 'https://' + pm.environment.get('tenant') + '.api.' + domain + '.com/oauth/token';",
          "const clientId = pm.environment.get('clientId');",
          "const clientSecret = pm.environment.get('clientSecret');",
          "const scope = pm.environment.get('scope');",
          "",
          "const formdata = [{",
          "        key: 'grant_type',",
          "        value: 'client_credentials'",
          "    },",
          "    {",
          "        key: 'client_id',",
          "        value: clientId",
          "    },",
          "    {",
          "        key: 'client_secret',",
          "        value: clientSecret",
          "    }",
          "];",
          "",
          "if (scope) {",
          "    formdata.push({",
          "        key: 'scope',",
          "        value: scope",
          "    });",
          "}",
          "",
          "const getTokenRequest = {",
          "    method: 'POST',",
          "    url: tokenUrl,",
          "    body: {",
          "        mode: 'formdata',",
          "        formdata: formdata",
          "    }",
          "};",
          "",
          "",
          "var moment = require('moment');",
          "if (!pm.environment.has('tokenExpTime')) {",
          "    pm.environment.set('tokenExpTime', moment());",
          "}",
          "",
          "if (moment(pm.environment.get('tokenExpTime')) <= moment() || !pm.environment.get('tokenExpTime') || !pm.environment.get('accessToken')) {",
          "    var time = moment();",
          "    time.add(12, 'hours');",
          "    pm.environment.set('tokenExpTime', time);",
          "    pm.sendRequest(getTokenRequest, (err, response) => {",
          "        const jsonResponse = response.json();",
          "        if (response.code != 200) {",
          "            throw new Error(`Unable to authenticate: ${JSON.stringify(jsonResponse)}`);",
          "        }",
          "        const newAccessToken = jsonResponse.access_token;",
          "        pm.environment.set('accessToken', newAccessToken);",
          "    });",
          "",
          "}",
          "",
          "const flag = pm.collectionVariables.get('experimentalEnabled');",
          "",
          "if (flag === 'true') {",
          "    pm.request.addHeader({",
          "        key: 'X-SailPoint-Experimental',",
          "        value: 'true'",
          "    });",
          "}",
          "",
          "// Add custom User-Agent header to all requests",
          "pm.request.addHeader({",
          "    key: 'User-Agent',",
          "    value: 'SailPointPostmanCollection'",
          "});"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "tenantName",
      "value": "{{tenant}}"
    },
    {
      "key": "baseUrl",
      "value": "https://{{tenantName}}.nonemployee.com/api/v2025"
    }
  ],
  "info": {
    "_postman_id": "189d00ce-f06e-47a5-9197-1c1535ed0a3c",
    "name": "NERM API v2025",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": {
      "content": "The NERM API v2025 accesss and modifies resources in your environment.",
      "type": "text/plain"
    }
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  }
}